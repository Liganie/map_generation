<!DOCTYPE html>
<html lang="en">

    <head>
        <meta charset="UTF-8">
        <meta content="text/html; charset=UTF-8" name="Content-Type">
        <link rel="stylesheet" href="style.css" />
        <link href='https://fonts.googleapis.com/css?family=Raleway:400,700' rel='stylesheet' type='text/css'>
        <title>Markov testing</title>
    </head>

    <body>
        <div id="content">
<div class="splash">
    
    <h1>Generating names</h1>
<div class="note">
    <script src="D3/d3.js"></script>

<div class="example" id="markovGeneratorView">
<textarea id="oMarkov" rows="15" cols="50"></textarea>
</br>
<button type="button" onclick="mewoUpdate()">Mewo names</button>  </br>
<button type="button" onclick="markovUpdate()">Markov names</button>
</div> </br>

<script src="seededRandom.js"></script>
<script src="language.js"></script>
<script src="markov.js"></script>
<script>

function mewoUpdate() {
    var language = makeRandomLanguage();
    var res = "";
    for(var i=0;i<25;i++) {
        res += " " + makeName(language, 'city');
    }
    document.getElementById("oMarkov").innerHTML = res;
}

var markovOrder;
var markovPrior;
var markovInput;

function markovParamUpdate() {
    var selectedValue = d3.selectAll('select').filter(function(d,i) {return i==0;}).property('value');
    if (selectedOrder = "order") {markovrder = 2;}
    else {markovOrder = parseInt(selectedValue);}
    selectedValue = d3.selectAll('select').filter(function(d,i) {return i==1;}).property('value');
    if (markovPrior = "prior") {markovPrior = 0.01;}
    else {markovPrior = parseFlat(selectedValue);}
    var selectedValue = d3.selectAll('select').filter(function(d,i) {return i==2;}).property('value');
    markovInput = markovData[selectedValue];
}

function markovUpdate() {
    markovParamUpdate();
    var t_markov = new Markov(markovInput, markovOrder, markovPrior);
    document.getElementById("oMarkov").innerHTML = t_markov.generate(25);
}

var markovDiv = d3.select("div#markovGeneratorView"); // Use to identify the script in the HTML document

var markovOrderCombobox = markovDiv.append("select")
.selectAll('option')
    .data(["order", "1", "2", "3", "4", "5"]).enter()
    .append('option')
        .text(function (d) { return d; });

var markovPriorCombobox = markovDiv.append("select")
.selectAll('option')
    .data(["prior", "0", "0.01", "0.02", "0.05", "0.1"]).enter()
    .append('option')
        .text(function (d) { return d; });

var markovDataCombobox = markovDiv.append("select")
.selectAll('option')
    .data(Object.keys(markovData)).enter()
    .append('option')
        .text(function (d) { return d; });

</script>

</div>
</div>
    </body>
</html>